CREATE DATABASE AgendaDB
GO

USE [AgendaDB]
GO

CREATE TABLE [User] (
    [ID] int NOT NULL IDENTITY(1,1) PRIMARY KEY,
    [EMAILADRESS] nvarchar(40) NOT NULL UNIQUE,
    [FIRSTNAME] nvarchar(40),
	[LASTNAME] nvarchar(40),
	[PASSWORD] nvarchar(65) NOT NULL,
    [ISADMIN] BIT NOT NULL DEFAULT 0
);
GO

CREATE TABLE [Event](
	[ID] int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[SUMMARY] nvarchar(30),
	[START] datetime NOT NULL,
	[END] datetime NOT NULL,
	[LOCATION] nvarchar(30),
	[USERID] int NOT NULL,
	CONSTRAINT [FK_Event_User_USERID] FOREIGN KEY ([USERID]) REFERENCES [User] ([ID]) ON DELETE CASCADE,
	[ISPRIVATE] BIT NOT NULL DEFAULT 0
);
GO

INSERT INTO [User] (EMAILADRESS, FIRSTNAME, LASTNAME, PASSWORD, ISADMIN)
VALUES ('a@a.com', 'a', 'a', 'CA978112CA1BBDCAFAC231B39A23DC4DA786EFF8147C4E72B9807785AFEE48BB', 1);
GO
