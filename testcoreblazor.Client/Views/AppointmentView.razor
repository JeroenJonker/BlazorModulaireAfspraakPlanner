@using BlazorAgenda.Client.Viewmodels
@using BlazorAgenda.Client.Shared;
@using Microsoft.JSInterop
@inject IJSRuntime JSRuntime

@page "/appointment"
@page "/appointment/{orgname}"

@inherits AppointmentViewModel

@if (StateService.Organization != null)
{
    if (Step == 0)
    {
        <AppointmentJobView Event="@Event" OnSubmit="@NextStep" />

    }
    else if (Step == 1)
    {
        <AppointmentDateTimeSelectionView Event="@Event" OnSubmit="@NextStep" />
    }
    else if (Step == 2)
    {
        <AppointmentOptionsView Event="@Event" OnSubmit="@Commit"/>
    }
}

<button onclick="@Check" />


@functions {
    ElementRef myInput;

    protected override void OnAfterRender()
    {
        base.OnAfterRender();
        JSRuntime.InvokeAsync<string>(
                "JsFunctions.initializeSelect2");
    }
}
